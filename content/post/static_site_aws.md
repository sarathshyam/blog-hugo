---
author: Sarath
title: "Static website using AWS S3, CloudFront, SSL and Custom Domain"
date: 2018-07-01T13:22:19+05:30
categories:
  - Web
tags:
  - S3
  - CloudFront
draft: true
---

This blog was earlier running as a Wordpress instance hosted on a t2.micro EC2 on AWS. It has now been migrated to AWS S3 as a static website and distributed via CloudFront CDN. This post summarises the new blog workflow and the steps for hosting a **static website on S3 with custom domain and SSL**.

A quick note on the blog engine and static site generation part. I am using [Hugo](https://gohugo.io/) as the CMS and static site generator. The theme used is a modified version of the [Hyde-hyde](https://github.com/htr3n/hyde-hyde) theme. The original theme was a two column theme with sidebar on the left, I did a quick hack to make it the way that I wanted. The [modified theme](https://github.com/sarathshyam/blog-hugo/tree/master/themes/hyde-hyde) as well as the hugo project for the blog is avaialable in this [repo](https://github.com/sarathshyam/blog-hugo). 

Once the static website is generated by Hugo, it is then deployed to S3.

### Hosting Static Websites on AWS S3 with Custom Domain and SSL.

Along the way, I learned that it is super easy to host static websites with a custom domain using AWS services(S3, CloudFront, Route53, AWS Certificate Manager). The AWS Certificate Manager(ACM) can be used to provision **FREE** SSL certificates for the domains that we own, how cool is that. 

AWS Services used:

- **AWS Certificate Manager**- To provision the certificate for the custom domain. 
- **S3**- To host the static website content
- **CloudFront**- As a CDN with content origin as the S3 bucket having the site content. When creating the distribution, we attach the certificate provisioned by ACM, so SSL termination is done at the CloudFront edge. 
- **Route53**- As the DNS for the custom domain(eg: sarathshyam.in). The A record will point to the cloudfront distrubution.

Login to AWS console.

### AWS Certificate Manager

Free SSL certificates using AWS Certificate Manager.

[Refer](https://aws.amazon.com/blogs/aws/new-aws-certificate-manager-deploy-ssltls-based-apps-on-aws/) for details on the AWS Certificate Manager

1. Go to the [Certificate Manager](https://console.aws.amazon.com/acm/home?region=us-east-1) and select _Request a Certificate_ which will start a wizard.
Choose _Public Certificate_ and enter the domain name(eg: sarathshyam.in). Now we have to prove that we own the domain. ACM supports two modes of validation, DNS and Email. I choose the DNS mode since I was already using Route53 as the DNS. On the final validation step ,expand the domain and there will be a button _Create Record in Route 53_. Click this button to add the CNAME record to Route53 or add it manually. Once this step is successfully done, the certificate will be issued.

![ACM](/img/aws-cm.png)

2. 